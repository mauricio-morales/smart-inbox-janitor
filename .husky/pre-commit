
#!/bin/sh

# Source shell profile to get full PATH (helps with VS Code)
if [ -f ~/.zshrc ]; then
    source ~/.zshrc
fi

# Set PATH to include common locations for npm/node
export PATH="/opt/homebrew/bin:/opt/homebrew/opt/node@20/bin:/usr/local/bin:$HOME/.npm-global/bin:$PATH"

# Change to the project directory
cd "$(dirname "$0")/.."

echo "ğŸ” Running pre-commit validation checks..."

# 1. Run format to ensure code is properly formatted before commit
echo "ğŸ¨ Formatting code..."
npm run format
if [ $? -ne 0 ]; then
  echo "âŒ Formatting failed. Please check your code."
  exit 1
fi

# Stage any formatting changes
git add -u

echo "âœ… All pre-commit checks passed! Code is formatted and ready to commit. ğŸ“"
